<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GOLDINU Presale</title>

  <style>
    :root{
      --bg:#06070b;
      --card: rgba(10,12,18,.78);
      --stroke: rgba(255,215,120,.22);
      --txt:#f5f1e6;
      --muted: rgba(245,241,230,.75);
      --gold1:#ffd37a;
      --gold2:#b77a1f;
      --glow: 0 0 22px rgba(255,203,115,.18), 0 0 64px rgba(255,156,40,.10);
      --r: 18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--txt);
      background: radial-gradient(1200px 600px at 20% 0%, rgba(255,190,90,.12), transparent 55%),
                  radial-gradient(900px 600px at 80% 10%, rgba(255,140,30,.10), transparent 60%),
                  var(--bg);
      min-height:100vh;
      overflow-x:hidden;
    }

    /* HERO BACKGROUND (file: hero.png) */
    .heroBg{
      position:fixed; inset:0;
      background:
        linear-gradient(180deg, rgba(0,0,0,.62), rgba(0,0,0,.78)),
        url("hero.png") center/cover no-repeat;
      filter:saturate(1.05);
      z-index:-2;
    }
    .grain{
      position:fixed; inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
      opacity:.28;
      z-index:-1;
      pointer-events:none;
    }

    .wrap{max-width:1060px;margin:0 auto;padding:18px 16px 60px}

    /* TOP BAR */
    .top{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; padding:14px 14px;
      border:1px solid var(--stroke);
      border-radius: var(--r);
      background: rgba(0,0,0,.38);
      box-shadow: var(--glow);
      backdrop-filter: blur(10px);
    }
    .brand{display:flex;align-items:center;gap:12px;min-width:0}
    .brand img{width:46px;height:46px;border-radius:14px;object-fit:cover;box-shadow:0 0 0 1px rgba(255,215,120,.25)}
    .brand .t{display:flex;flex-direction:column;min-width:0}
    .brand .t b{letter-spacing:.8px}
    .brand .t span{color:var(--muted);font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    .tabs{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      border:1px solid rgba(255,215,120,.22);
      background: rgba(10,12,18,.55);
      color:var(--txt);
      padding:10px 14px;
      border-radius: 14px;
      cursor:pointer;
      transition:.15s transform, .15s border-color, .15s box-shadow;
      box-shadow: 0 6px 22px rgba(0,0,0,.25);
      backdrop-filter: blur(8px);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{transform:scale(.99)}
    .btn--active{
      border-color: rgba(255,215,120,.55);
      box-shadow: 0 0 0 2px rgba(255,215,120,.12) inset, var(--glow);
    }

    /* LAYOUT */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
      margin-top:14px;
    }
    @media(max-width: 900px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      border:1px solid var(--stroke);
      background: var(--card);
      border-radius: var(--r);
      padding:16px;
      box-shadow: var(--glow);
      backdrop-filter: blur(10px);
    }
    .h1{
      font-size:34px; margin:0 0 8px;
      letter-spacing:1px;
      text-shadow: 0 1px 0 rgba(0,0,0,.7);
    }
    .sub{color:var(--muted);line-height:1.45}
    .goldline{
      height:1px; margin:12px 0;
      background: linear-gradient(90deg, transparent, rgba(255,215,120,.65), transparent);
      opacity:.7;
    }

    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    input{
      width:100%;
      background: rgba(0,0,0,.35);
      border:1px solid rgba(255,215,120,.25);
      color:var(--txt);
      padding:12px 12px;
      border-radius:14px;
      outline:none;
    }
    input:focus{border-color: rgba(255,215,120,.55); box-shadow: 0 0 0 3px rgba(255,215,120,.10)}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;
      border:1px solid rgba(255,215,120,.22);
      border-radius:999px;
      background: rgba(0,0,0,.28);
      color:var(--muted);
      max-width:100%;
    }
    code{color:var(--txt);font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas; background:rgba(0,0,0,.25); padding:2px 8px; border-radius:999px}

    .bigBtn{
      border:1px solid rgba(255,215,120,.30);
      background: linear-gradient(180deg, rgba(255,215,120,.16), rgba(0,0,0,.25));
      padding:12px 14px;
      border-radius:14px;
      color:var(--txt);
      cursor:pointer;
      box-shadow: var(--glow);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }

    table{width:100%; border-collapse:collapse; margin-top:10px; overflow:hidden; border-radius:14px}
    th,td{border-bottom:1px solid rgba(255,215,120,.12); padding:10px; text-align:left}
    th{color:rgba(245,241,230,.75); font-weight:700}
    .hide{display:none}

    .imgFrame{
      border:1px solid rgba(255,215,120,.22);
      border-radius:18px;
      overflow:hidden;
      box-shadow: var(--glow);
      background: rgba(0,0,0,.25);
    }
    .imgFrame img{display:block;width:100%;height:auto}

    .kpiGrid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:10px;
    }
    @media(max-width:700px){.kpiGrid{grid-template-columns:1fr}}
    .kpi{padding:12px;border:1px solid rgba(255,215,120,.18);border-radius:16px;background:rgba(0,0,0,.22)}
    .kpi b{display:block;font-size:16px}
    .kpi span{color:var(--muted);font-size:13px}

    .roadmap{display:grid;gap:10px;margin-top:12px}
    .rmItem{
      display:flex; gap:12px; align-items:flex-start;
      padding:12px; border:1px solid rgba(255,215,120,.16);
      border-radius:16px; background:rgba(0,0,0,.18);
    }
    .dot{
      width:12px;height:12px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, var(--gold1), var(--gold2));
      margin-top:6px; flex:0 0 12px;
      box-shadow:0 0 18px rgba(255,200,90,.25);
    }
    .rmItem b{display:block}
    .rmItem p{margin:4px 0 0;color:var(--muted);line-height:1.35}

    .footerNote{margin-top:10px;color:rgba(245,241,230,.70);font-size:12.5px;line-height:1.35}
    .warn{
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(255,120,120,.25);
      background: rgba(255,0,0,.06);
      color: rgba(255,220,220,.9);
      margin-top:10px;
      display:none;
    }
  </style>
</head>

<body>
  <div class="heroBg"></div>
  <div class="grain"></div>

  <div class="wrap">
    <div class="top">
      <div class="brand">
        <!-- file: goldinu.png -->
        <img src="goldinu.png" alt="GOLDINU" />
        <div class="t">
          <b>GOLDINU</b>
          <span>Solana Presale ‚Ä¢ Golden vibes</span>
        </div>
      </div>
      <div class="tabs">
        <button id="tabPresale" class="btn btn--active">Presale</button>
        <button id="tabTokenomics" class="btn">Tokenomics</button>
      </div>
    </div>

    <!-- PRESALE PAGE -->
    <div id="pagePresale">
      <div class="grid">
        <div class="card">
          <div class="h1">GOLDINU Presale üê∂</div>
          <div class="sub">
            Send SOL to the official presale wallet. Minimum: <b><span id="minSolText"></span> SOL</b>.<br/>
            Please always verify the wallet address before sending.
          </div>

          <div class="warn" id="fileWarn"></div>

          <div class="goldline"></div>

          <div class="row">
            <span class="pill">Presale Wallet: <code id="kWalletShort"></code></span>
            <button id="copyPresale" class="btn">Copy</button>
            <button id="openSolscan" class="btn">Solscan</button>
          </div>

          <div style="margin-top:10px" class="sub">Full: <span id="kWalletFull"></span></div>

          <div class="goldline"></div>

          <div class="row">
            <button id="btnConnect" class="bigBtn">Connect Phantom</button>
            <span class="pill">Your Wallet: <code id="kUserWallet">‚Äî</code></span>
            <span class="pill" id="phaseBadge">Phase: ‚Äî</span>
          </div>

          <div style="margin-top:12px" class="row">
            <div style="flex:1; min-width:240px">
              <input id="amountSol" type="number" step="0.0001" min="0" placeholder="Amount in SOL (e.g. 0.2)" />
            </div>
            <button id="btnBuy" class="bigBtn">Buy</button>
          </div>

          <div style="margin-top:10px" id="txStatus" class="sub">Status: initializing‚Ä¶</div>
          <div style="margin-top:6px" class="sub" id="rpcStatus">RPC: ‚Äî</div>

          <div class="footerNote">
            Note: Contributions go directly on-chain to the official presale wallet. There is no refund logic on this page.
          </div>
        </div>

        <div class="card">
          <div class="row" style="justify-content:space-between">
            <b style="font-size:18px">Phases & Allocation</b>
            <button id="btnTokenomicsJump" class="btn">Tokenomics ‚Üí</button>
          </div>

          <div class="kpiGrid">
            <div class="kpi"><b>Supply</b><span>1,000,000,000 GOLDINU</span></div>
            <div class="kpi"><b>Presale</b><span>10 phases ‚Ä¢ rate decreases each phase</span></div>
            <div class="kpi"><b>LP</b><span>Locked at launch (plan)</span></div>
          </div>

          <div class="goldline"></div>

          <table id="phaseTable">
            <thead>
              <tr><th>Phase</th><th>Rate</th><th>SOL Cap</th><th>Token Cap</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- TOKENOMICS PAGE -->
    <div id="pageTokenomics" class="hide">
      <div class="grid">
        <div class="card">
          <div class="h1" style="font-size:28px;margin-bottom:6px">Tokenomics</div>
          <div class="sub">$GINU token distribution + presale phases. ‚ú®</div>

          <div class="goldline"></div>

          <!-- file: tokenomics.png -->
          <div class="imgFrame">
            <img src="tokenomics.png" alt="GOLDINU Tokenomics" />
          </div>

          <div class="goldline"></div>

          <b style="font-size:18px">Roadmap (simple)</b>
          <div class="roadmap">
            <div class="rmItem">
              <div class="dot"></div>
              <div>
                <b>Phase 1‚Äì10: Presale</b>
                <p>Transparent phases, live wallet tracking, community growth.</p>
              </div>
            </div>
            <div class="rmItem">
              <div class="dot"></div>
              <div>
                <b>Launch: LP + Listing</b>
                <p>Create LP and lock at launch. Trading opens for everyone at the same time.</p>
              </div>
            </div>
            <div class="rmItem">
              <div class="dot"></div>
              <div>
                <b>Post-launch: Growth</b>
                <p>Marketing, listings, partnerships, and utility (as the project evolves).</p>
              </div>
            </div>
          </div>

          <div style="margin-top:14px" class="row">
            <button id="backToPresale" class="btn">‚¨Ö Back to Presale</button>
          </div>
        </div>

        <div class="card">
          <div class="row" style="gap:12px;align-items:center">
            <img src="goldinu.png" alt="Gold Inu Buddy" style="width:88px;height:88px;border-radius:22px;object-fit:cover;box-shadow:0 0 0 1px rgba(255,215,120,.25), var(--glow)" />
            <div>
              <b style="font-size:18px">GOLDINU Buddy üêæ</b>
              <div class="sub">Mascot presence for brand consistency on every page.</div>
            </div>
          </div>

          <div class="goldline"></div>

          <b style="font-size:18px">How presale works</b>
          <div class="sub" style="margin-top:6px">
            1) Connect Phantom<br/>
            2) Enter SOL amount (min. <span id="minSolText2"></span>)<br/>
            3) Click ‚ÄúBuy‚Äù ‚Üí SOL is sent directly to the presale wallet<br/>
            4) Phase badge updates automatically from wallet balance
          </div>

          <div class="goldline"></div>

          <b style="font-size:18px">Links</b>
          <div class="sub" style="margin-top:6px">
            ‚Ä¢ Solscan: verify wallet & transactions<br/>
            ‚Ä¢ GitHub Pages: public, transparent frontend
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script>
    // =========================
    // CONFIG
    // =========================
    const PRESALE_WALLET = "6g2Kn6hgfFUGXH44dDHLGPFL5eQG6FqR346HgGUrCmx4";
    const MIN_SOL = 0.2;

    // If the presale wallet already had SOL before presale start, set this baseline.
    const START_BALANCE_SOL = 0;

    // RPC: Alchemy first + safe fallbacks
    const RPC_LIST = [
      "https://solana-mainnet.g.alchemy.com/v2/uenOkKWZ9SOxMAXUPWvin",
      "https://api.mainnet-beta.solana.com",
      "https://rpc.ankr.com/solana"
    ];

    // Presale phases (YOUR source of truth)
    const PHASES = [
      {phase: 1, rate: 6000000, solCap: 3.0,     tokenCap: 18000000},
      {phase: 2, rate: 5750000, solCap: 5.0,     tokenCap: 28750000},
      {phase: 3, rate: 5500000, solCap: 7.0,     tokenCap: 38500000},
      {phase: 4, rate: 5250000, solCap: 9.0,     tokenCap: 47250000},
      {phase: 5, rate: 5000000, solCap: 12.0,    tokenCap: 60000000},
      {phase: 6, rate: 4750000, solCap: 12.0,    tokenCap: 57000000},
      {phase: 7, rate: 4500000, solCap: 12.0,    tokenCap: 54000000},
      {phase: 8, rate: 4250000, solCap: 12.0,    tokenCap: 51000000},
      {phase: 9, rate: 4000000, solCap: 12.0,    tokenCap: 48000000},
      {phase:10, rate: 3750000, solCap: 12.6667, tokenCap: 47500000},
    ];

    // =========================
    // UI HELPERS
    // =========================
    const el = (id)=>document.getElementById(id);
    function shortAddr(a){ return a.slice(0,4)+"‚Ä¶"+a.slice(-5); }
    function formatNum(n){ return n.toLocaleString("en-US"); }
    function formatSol(n){ return (Math.round(n*10000)/10000).toString(); }
    function setStatus(msg){ el("txStatus").innerHTML = msg; }
    function setRpcStatus(msg){ el("rpcStatus").textContent = msg; }

    // Display config in UI
    el("minSolText").textContent = MIN_SOL;
    el("minSolText2").textContent = MIN_SOL;
    el("kWalletShort").textContent = shortAddr(PRESALE_WALLET);
    el("kWalletFull").textContent = PRESALE_WALLET;

    // Warn about filename case issues (common on GitHub Pages)
    (function fileNameGuard(){
      const bad = [];
      // You must upload: hero.png, goldinu.png, tokenomics.png (all lowercase)
      // If you used .PNG or different case, images may not load.
      // We can't read repo files here, but we can warn proactively.
      bad.push("Make sure your image filenames are EXACTLY: hero.png, goldinu.png, tokenomics.png (lowercase).");
      const w = el("fileWarn");
      w.style.display = "block";
      w.textContent = bad.join(" ");
    })();

    // Tabs
    const pagePresale = el("pagePresale");
    const pageTokenomics = el("pageTokenomics");
    const tabPresale = el("tabPresale");
    const tabTokenomics = el("tabTokenomics");

    function showPresale(){
      pagePresale.classList.remove("hide");
      pageTokenomics.classList.add("hide");
      tabPresale.classList.add("btn--active");
      tabTokenomics.classList.remove("btn--active");
      window.scrollTo({top:0,behavior:"smooth"});
    }
    function showTokenomics(){
      pagePresale.classList.add("hide");
      pageTokenomics.classList.remove("hide");
      tabTokenomics.classList.add("btn--active");
      tabPresale.classList.remove("btn--active");
      window.scrollTo({top:0,behavior:"smooth"});
    }
    tabPresale.addEventListener("click", showPresale);
    tabTokenomics.addEventListener("click", showTokenomics);
    el("btnTokenomicsJump").addEventListener("click", showTokenomics);
    el("backToPresale").addEventListener("click", showPresale);

    // Solscan + Copy
    el("openSolscan").addEventListener("click", ()=>window.open(`https://solscan.io/account/${PRESALE_WALLET}`,"_blank"));
    el("copyPresale").addEventListener("click", async ()=>{
      try{
        await navigator.clipboard.writeText(PRESALE_WALLET);
        setStatus("Copied presale wallet ‚úÖ");
        setTimeout(()=>setStatus("Status: ready ‚úÖ"), 1200);
      }catch{
        setStatus("Copy failed. Please copy manually.");
      }
    });

    // Phase table
    const tbody = document.querySelector("#phaseTable tbody");
    PHASES.forEach(p=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><b>Phase ${p.phase}</b></td>
        <td>${formatNum(p.rate)} GOLDINU</td>
        <td>${formatSol(p.solCap)} SOL</td>
        <td>${formatNum(p.tokenCap)} GOLDINU</td>
      `;
      tbody.appendChild(tr);
    });

    // =========================
    // SOLANA + RPC MANAGER
    // =========================
    const { Connection, PublicKey, SystemProgram, Transaction, LAMPORTS_PER_SOL } = solanaWeb3;

    let connection = null;
    let currentRpcIndex = 0;

    async function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }

    async function probeRpc(url){
      const c = new Connection(url, "confirmed");
      const t0 = performance.now();
      await c.getLatestBlockhash("confirmed");
      const t1 = performance.now();
      return { url, latencyMs: Math.round(t1 - t0) };
    }

    function rpcLabel(url){
      if (url.includes("alchemy")) return "Alchemy";
      if (url.includes("ankr")) return "Ankr";
      return "Mainnet";
    }

    async function initConnection(){
      const results = [];
      for (const url of RPC_LIST){
        try{ results.push(await probeRpc(url)); } catch(e){}
      }
      if (!results.length){
        setRpcStatus("RPC: all endpoints failed");
        throw new Error("All RPC endpoints failed");
      }
      results.sort((a,b)=>a.latencyMs - b.latencyMs);
      const best = results[0];
      currentRpcIndex = RPC_LIST.indexOf(best.url);
      connection = new Connection(best.url, "confirmed");
      setRpcStatus(`RPC: ${rpcLabel(best.url)} (~${best.latencyMs}ms) ‚úÖ`);
    }

    async function switchToNextRpc(){
      for (let step = 1; step <= RPC_LIST.length; step++){
        const idx = (currentRpcIndex + step) % RPC_LIST.length;
        const url = RPC_LIST[idx];
        try{
          const c = new Connection(url, "confirmed");
          await c.getLatestBlockhash("confirmed");
          connection = c;
          currentRpcIndex = idx;
          setRpcStatus(`RPC switched: ${rpcLabel(url)} ‚úÖ`);
          return true;
        }catch(e){}
      }
      setRpcStatus("RPC switch failed");
      return false;
    }

    async function withRetries(fn, { tries = 3, delayMs = 350 } = {}){
      let lastErr = null;
      for (let i = 0; i < tries; i++){
        try{ return await fn(); }
        catch(e){
          lastErr = e;
          await switchToNextRpc();
          await sleep(delayMs * (i+1));
        }
      }
      throw lastErr;
    }

    // =========================
    // PHANTOM BUY
    // =========================
    let provider = null;
    let userPubkey = null;

    function getProvider(){
      if ("solana" in window) {
        const p = window.solana;
        if (p?.isPhantom) return p;
      }
      return null;
    }

    async function connectWallet(){
      provider = getProvider();
      if (!provider){
        setStatus("Phantom not found. Install Phantom.");
        return;
      }
      try{
        const resp = await provider.connect();
        userPubkey = resp.publicKey;
        el("kUserWallet").textContent = shortAddr(userPubkey.toString());
        setStatus("Wallet connected ‚úÖ");
      }catch(e){
        setStatus("Connect canceled");
      }
    }

    async function getWalletSol(){
      const pub = new PublicKey(PRESALE_WALLET);
      return await withRetries(async ()=>{
        const lamports = await connection.getBalance(pub, "confirmed");
        return lamports / LAMPORTS_PER_SOL;
      });
    }

    function computeCurrentPhase(raisedSol){
      let cum = 0;
      for (const p of PHASES){
        cum += p.solCap;
        if (raisedSol < cum + 1e-9) return p.phase;
      }
      return PHASES[PHASES.length - 1].phase;
    }

    function totalSolCap(){ return PHASES.reduce((a,p)=>a + p.solCap, 0); }

    async function updatePhaseBadge(){
      try{
        const bal = await getWalletSol();
        const raised = Math.max(0, bal - START_BALANCE_SOL);
        const phase = computeCurrentPhase(raised);

        const cap = totalSolCap();
        const left = Math.max(0, cap - raised);

        el("phaseBadge").textContent = `Phase: ${phase} ‚Ä¢ Raised: ${formatSol(raised)} SOL ‚Ä¢ Left: ${formatSol(left)} SOL`;
      }catch{
        el("phaseBadge").textContent = "Phase: ‚Äî (network)";
      }
    }

    async function capCheckOrBlock(amt){
      const cap = totalSolCap();
      const bal = await getWalletSol();
      const raised = Math.max(0, bal - START_BALANCE_SOL);
      if (raised + amt > cap + 1e-9){
        const left = Math.max(0, cap - raised);
        setStatus(`Sold out / cap reached. Left: ${formatSol(left)} SOL`);
        return false;
      }
      return true;
    }

    async function sendSol(){
      if (!connection){
        setStatus("Initializing network‚Ä¶");
        await initConnection();
      }

      if (!userPubkey){
        await connectWallet();
        if (!userPubkey) return;
      }

      const amt = Number(el("amountSol").value);
      if (!amt || amt <= 0){ setStatus("Enter a valid SOL amount (e.g. 0.2)"); return; }
      if (amt < MIN_SOL){ setStatus(`Minimum is ${MIN_SOL} SOL`); return; }

      setStatus("Checking cap‚Ä¶");
      const ok = await capCheckOrBlock(amt);
      if (!ok) return;

      try{
        setStatus("Creating transaction‚Ä¶");
        const fromPubkey = userPubkey;
        const toPubkey = new PublicKey(PRESALE_WALLET);

        const tx = new Transaction().add(
          SystemProgram.transfer({
            fromPubkey,
            toPubkey,
            lamports: Math.round(amt * LAMPORTS_PER_SOL),
          })
        );

        tx.feePayer = fromPubkey;

        const { blockhash, lastValidBlockHeight } = await withRetries(
          async ()=> await connection.getLatestBlockhash("finalized"),
          { tries: 3 }
        );
        tx.recentBlockhash = blockhash;

        setStatus("Sign in Phantom‚Ä¶");
        const signed = await provider.signTransaction(tx);

        setStatus("Sending‚Ä¶");
        const sig = await withRetries(
          async ()=> await connection.sendRawTransaction(signed.serialize(), { skipPreflight: false }),
          { tries: 3 }
        );

        setStatus("Confirming‚Ä¶");
        await withRetries(async ()=>{
          return await connection.confirmTransaction(
            { signature: sig, blockhash, lastValidBlockHeight },
            "confirmed"
          );
        }, { tries: 3 });

        setStatus(`‚úÖ Success ‚Ä¢ TX: <a href="https://solscan.io/tx/${sig}" target="_blank" rel="noreferrer">${sig}</a>`);
        setTimeout(updatePhaseBadge, 1200);
      }catch(e){
        await switchToNextRpc();
        setStatus("Error: " + (e?.message || e));
      }
    }

    el("btnConnect").addEventListener("click", connectWallet);
    el("btnBuy").addEventListener("click", sendSol);

    (async ()=>{
      try{
        setStatus("Initializing RPC‚Ä¶");
        await initConnection();
        setStatus("Status: ready ‚úÖ");
        await updatePhaseBadge();
        setInterval(updatePhaseBadge, 15000);
      }catch(e){
        setStatus("Network init failed");
      }
    })();
  </script>
</body>
</html>
